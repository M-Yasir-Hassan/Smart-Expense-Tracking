@model SmartExpenseTracker.Models.Income

@{
    ViewData["Title"] = "Delete Income";
}

<style>
    .income-hero {
        background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        border-radius: 20px;
        color: white;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 15px 35px rgba(220, 53, 69, 0.3);
    }

    .delete-card {
        background: white;
        border: none;
        border-radius: 20px;
        box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        overflow: hidden;
        border: 2px solid #dc3545;
    }

    .delete-header {
        background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
        border-bottom: 1px solid #f5c6cb;
        padding: 2rem;
    }

    .delete-body {
        padding: 2rem;
    }

    .warning-alert {
        background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
        border: 2px solid #ffc107;
        border-radius: 15px;
        padding: 1.5rem;
        margin-bottom: 2rem;
        position: relative;
        overflow: hidden;
    }

    .warning-alert::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 4px;
        height: 100%;
        background: #ffc107;
    }

    .warning-icon {
        color: #856404;
        font-size: 1.5rem;
        margin-right: 1rem;
        animation: pulse 2s infinite;
    }

    @@keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }

    .warning-text {
        color: #856404;
        font-weight: 600;
        margin: 0;
        font-size: 1.1rem;
    }

    .detail-item {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 15px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        border-left: 4px solid #dc3545;
        transition: all 0.3s ease;
    }

    .detail-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }

    .detail-label {
        font-weight: 600;
        color: #495057;
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .detail-label i {
        margin-right: 0.5rem;
        color: #dc3545;
        width: 20px;
    }

    .detail-value {
        font-size: 1.1rem;
        color: #212529;
        font-weight: 500;
    }

    .amount-display {
        background: linear-gradient(135deg, #e8f5e8 0%, #d4edda 100%);
        border-radius: 15px;
        padding: 2rem;
        text-align: center;
        margin-bottom: 2rem;
        border: 2px solid #c3e6cb;
    }

    .amount-value {
        font-size: 3rem;
        font-weight: 700;
        color: #28a745;
        margin-bottom: 0.5rem;
        text-shadow: 0 2px 4px rgba(40, 167, 69, 0.2);
    }

    .amount-label {
        color: #6c757d;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-size: 0.9rem;
    }

    .category-badge {
        display: inline-flex;
        align-items: center;
        padding: 0.75rem 1.5rem;
        border-radius: 25px;
        font-weight: 600;
        font-size: 1rem;
        color: white;
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        transition: all 0.3s ease;
    }

    .category-badge:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    }

    .category-badge i {
        margin-right: 0.5rem;
        font-size: 1.1rem;
    }

    .date-badge {
        background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 25px;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        box-shadow: 0 5px 15px rgba(108, 117, 125, 0.3);
    }

    .date-badge i {
        margin-right: 0.5rem;
    }

    .description-box {
        background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
        border: 2px solid #ffeaa7;
        border-radius: 15px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
    }

    .description-text {
        color: #856404;
        font-size: 1.1rem;
        line-height: 1.6;
        margin: 0;
    }

    .timestamp-section {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 15px;
        padding: 1.5rem;
        margin-bottom: 2rem;
    }

    .timestamp-item {
        display: flex;
        align-items: center;
        margin-bottom: 1rem;
    }

    .timestamp-item:last-child {
        margin-bottom: 0;
    }

    .timestamp-item i {
        color: #dc3545;
        margin-right: 0.75rem;
        width: 20px;
    }

    .timestamp-label {
        font-weight: 600;
        color: #495057;
        margin-right: 0.5rem;
        min-width: 80px;
    }

    .timestamp-value {
        color: #6c757d;
    }

    .action-buttons {
        display: flex;
        gap: 1rem;
        justify-content: space-between;
        align-items: center;
        padding-top: 2rem;
        border-top: 2px solid #f8f9fa;
    }

    .btn-cancel {
        background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
        border: none;
        border-radius: 12px;
        padding: 0.75rem 2rem;
        font-weight: 600;
        color: white;
        transition: all 0.3s ease;
        text-decoration: none;
    }

    .btn-cancel:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(108, 117, 125, 0.3);
        color: white;
    }

    .btn-details {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        border: none;
        border-radius: 12px;
        padding: 0.75rem 2rem;
        font-weight: 600;
        color: white;
        transition: all 0.3s ease;
        text-decoration: none;
    }

    .btn-details:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(79, 172, 254, 0.3);
        color: white;
    }

    .btn-delete {
        background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        border: none;
        border-radius: 12px;
        padding: 0.75rem 2rem;
        font-weight: 600;
        color: white;
        transition: all 0.3s ease;
    }

    .btn-delete:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(220, 53, 69, 0.3);
        color: white;
    }

    .income-id {
        font-size: 1.2rem;
        opacity: 0.8;
        font-weight: 500;
    }

    @@keyframes shake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-5px); }
        75% { transform: translateX(5px); }
    }

    .shake {
        animation: shake 0.5s ease-in-out;
    }

    @@media (max-width: 768px) {
        .income-hero {
            padding: 1.5rem;
            text-align: center;
        }

        .delete-header, .delete-body {
            padding: 1.5rem;
        }

        .amount-display {
            padding: 1.5rem;
        }

        .amount-value {
            font-size: 2.5rem;
        }

        .detail-item {
            padding: 1rem;
        }

        .timestamp-section {
            padding: 1rem;
        }

        .action-buttons {
            flex-direction: column;
            gap: 1rem;
        }

        .btn-cancel, .btn-details, .btn-delete {
            width: 100%;
            text-align: center;
        }

        .button-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            width: 100%;
        }
    }
</style>

<div class="container">
    <!-- Hero Section -->
    <div class="income-hero">
        <div class="row align-items-center">
            <div class="col-md-8">
                <h1 class="mb-2">
                    <i class="fas fa-exclamation-triangle me-3"></i>Delete Income
                </h1>
                <p class="mb-0 income-id">Income ID: #@Model.Id</p>
            </div>
            <div class="col-md-4 text-md-end">
                <a asp-action="Index" class="btn btn-cancel">
                    <i class="fas fa-arrow-left me-2"></i>Back to Income
                </a>
            </div>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="delete-card">
                <div class="delete-header">
                    <h4 class="mb-1 fw-bold" style="color: #dc3545;">
                        <i class="fas fa-trash me-2"></i>Confirm Income Deletion
                    </h4>
                    <p class="mb-0 text-muted">Review the income details before permanent deletion</p>
                </div>
                <div class="delete-body">
                    <!-- Warning Alert -->
                    <div class="warning-alert">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-exclamation-triangle warning-icon"></i>
                            <p class="warning-text">
                                <strong>Warning!</strong> Are you sure you want to delete this income record? This action cannot be undone and will permanently remove all associated data.
                            </p>
                        </div>
                    </div>

                    <!-- Amount Display -->
                    <div class="amount-display">
                        <div class="amount-value">
                            <i class="fas fa-dollar-sign"></i>@Model.Amount.ToString("N2")
                        </div>
                        <div class="amount-label">@Model.Title</div>
                    </div>

                    <div class="row">
                        <!-- Date Information -->
                        <div class="col-md-6 mb-3">
                            <div class="detail-item">
                                <div class="detail-label">
                                    <i class="fas fa-calendar"></i>Income Date
                                </div>
                                <div class="detail-value">
                                    <span class="date-badge">
                                        <i class="fas fa-calendar-day"></i>
                                        @Model.Date.ToString("MMMM dd, yyyy")
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Category Information -->
                        <div class="col-md-6 mb-3">
                            <div class="detail-item">
                                <div class="detail-label">
                                    <i class="fas fa-folder"></i>Category
                                </div>
                                <div class="detail-value">
                                    @if (Model.Category != null)
                                    {
                                        <span class="category-badge" style="background: linear-gradient(135deg, @Model.Category.Color 0%, @Model.Category.Color 100%);">
                                            @if (!string.IsNullOrEmpty(Model.Category.Icon))
                                            {
                                                <i class="@Model.Category.Icon"></i>
                                            }
                                            @Model.Category.Name
                                        </span>
                                    }
                                    else
                                    {
                                        <span class="text-muted">No category assigned</span>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Description -->
                    @if (!string.IsNullOrEmpty(Model.Description))
                    {
                        <div class="description-box">
                            <div class="detail-label mb-2" style="color: #856404;">
                                <i class="fas fa-comment"></i>Description
                            </div>
                            <p class="description-text">@Model.Description</p>
                        </div>
                    }

                    <!-- Timestamp Information -->
                    <div class="timestamp-section">
                        <h6 class="fw-bold mb-3" style="color: #dc3545;">
                            <i class="fas fa-clock me-2"></i>Timeline Information
                        </h6>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="timestamp-item">
                                    <i class="fas fa-plus-circle"></i>
                                    <span class="timestamp-label">Created:</span>
                                    <span class="timestamp-value">@Model.CreatedDate.ToString("MMM dd, yyyy 'at' hh:mm tt")</span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="timestamp-item">
                                    <i class="fas fa-edit"></i>
                                    <span class="timestamp-label">Modified:</span>
                                    <span class="timestamp-value">@(Model.ModifiedDate?.ToString("MMM dd, yyyy 'at' hh:mm tt") ?? "Never modified")</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="action-buttons">
                        <a asp-action="Index" class="btn btn-cancel">
                            <i class="fas fa-times me-2"></i>Cancel
                        </a>
                        <div class="button-group">
                            <a asp-action="Details" asp-route-id="@Model.Id" class="btn btn-details me-2">
                                <i class="fas fa-eye me-2"></i>View Details
                            </a>
                            <form asp-action="Delete" method="post" class="d-inline" id="deleteForm">
                                <input type="hidden" asp-for="Id" />
                                <button type="submit" class="btn btn-delete" id="deleteBtn">
                                    <i class="fas fa-trash me-2"></i>Delete Income
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const deleteForm = document.getElementById('deleteForm');
        const deleteBtn = document.getElementById('deleteBtn');

        deleteForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Enhanced confirmation dialog
            const result = confirm('⚠️ FINAL WARNING ⚠️\n\nAre you absolutely sure you want to delete this income record?\n\n• This action is PERMANENT and cannot be undone\n• All data associated with this income will be lost\n• This may affect your financial reports and statistics\n\nType "DELETE" in the next prompt to confirm.');
            
            if (result) {
                const confirmText = prompt('Please type "DELETE" (in capital letters) to confirm the deletion:');
                if (confirmText === 'DELETE') {
                    // Submit the form
                    this.submit();
                } else {
                    // Show shake animation for incorrect confirmation
                    deleteBtn.classList.add('shake');
                    setTimeout(() => deleteBtn.classList.remove('shake'), 500);
                    
                    if (confirmText !== null) { // User didn't cancel
                        alert('Deletion cancelled. The confirmation text did not match.');
                    }
                }
            }
        });
    });
</script>